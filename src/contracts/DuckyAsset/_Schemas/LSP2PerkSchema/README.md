# LSP2PerkSchema for DuckyAsset

## Introduction

`LSP2PerkSchema` is a dynamic and flexible schema designed for the `DuckyAsset` smart contract, tailored to the needs of a decentralized marketplace. It follows the ERC725Y standard and adheres to the LSP2 - ERC725Y JSON Schema guidelines, facilitating a standardized and consistent approach to encoding and decoding perk data.

## Schema Overview

The schema uses dynamic keys to uniquely identify and manage perks for each asset. It comprises three main components:

1. **Perk Metadata URI**: Links to detailed perk information stored off-chain, typically on IPFS or Arweave.
2. **PerkKeys Array**: ere
2. **PerkPropertyID Array**: A unique identifier for each perk, used to track and manage perk status.

## Schema Structure

```typescript
// const LSP2PerkSchema = [
//   {
//     "name": "Perks:<AssetAddress>:<PerkName>:Metadata",
//     "key": "0x7209ece5e2ac0f6752e14a92ae8f33b9a8c7f17a0ac7c6feedc322e8b9d5fe19",
//     "keyType": "MappingWithGrouping",
//     "valueType": "string",
//     "valueContent": "JSONURL"
//   },
//   {
//     "name": "Perks:<AssetAddress>:<PerkName>:PerkPropertyKeys",
//     "key": "0xb80bc58cb707abc7481424011c1ba223986b6b4302ab48ca53b85c77fb26ff12",
//     "keyType": "MappingWithGrouping",
//     "valueType": "string[]",
//     "valueContent": "String"
//   },
//   {
//     "name": "Perks:<AssetAddress>:<PerkName>:<PerkPropertyID>",
//     "key": "0xe6eff78e7d073729ba426f644c14a47696cd3a2fba4cdb008e7ba007b87c1b8c",
//     "keyType": "MappingWithGrouping",
//     "valueType": "string[]",
//     "valueContent": "String"
//   }
// ]
[
  {
    "name": "Perks:Metadata:<bytes32>", // Perk Metadata URI
    "key": "0x2264ad86cc9f1f4f2b970000<bytes32>",
    "keyType": "MappingWithGrouping",
    "valueType": "string",
    "valueContent": "JSONURL"
  },
  {
    "name": "Perks:PerkPropertyKeys:<bytes32>", // PerkKeys Array
    "key": "0x2264ad86cc9f69f743fa0000<bytes32>",
    "keyType": "MappingWithGrouping",
    "valueType": "string[]",
    "valueContent": "String"
  },
  {
    "name": "Perks:<bytes32>:<bytes32>", // PerkPropertyID Array (first bytes32 is the PerkKey, is the address and perk name concatenated together and hashed with 
    "key": "0x2264ad86cc9f<bytes32>0000<bytes32>",
    "keyType": "MappingWithGrouping",
    "valueType": "string[]",
    "valueContent": "String"
  }
]

Perks:<bytes32>:<bytes32> 
- the first bytes32 (PerkPropertyKey), 
  -  is the address and perk name concatenated together and hashed with keccak256, then sliced to 32 bytes keeping the 0x intact.
- second bytes32 is the PerkPropertyID,
  - is a nonce that is generated by the backend from


```

```
```

    const perkNameAddressbytes32 = EOAManagerService.web3.utils
      .keccak256(assetAddress + perkName)
      .slice(0, 32)

```




```

## Implementation

- The `PerkSchema` is crucial in the `DuckyAsset` smart contract for adding, tracking, and updating perks.
- It handles dynamic data associated with unique assets and perks, ensuring scalability and adaptability.

## Best Practices

- Ensure uniqueness in asset addresses and perk names to avoid overlaps.
- Regularly update off-chain metadata to keep perks relevant and accurate.
- Validate all data against the schema before encoding to maintain data integrity.

## Contribution

Contributions to improve or extend the `PerkSchema` are welcome. Please adhere to existing standards and guidelines for any modifications or additions.
